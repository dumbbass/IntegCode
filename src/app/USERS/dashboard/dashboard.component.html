  <div class="dashboard-container">
    <app-sidenav></app-sidenav>
    <div class="main-content">
      <div class="dashboard-header-container">
        <div class="header">
          <div class="logo">
            <i class="fas fa-credit-card"></i> Dashboard
          </div>
        </div>
        <!-- Greeting Section -->
        <div class="greeting-container">
          <h2>{{ greetingMessage }}, {{ patientName }}!</h2>
        </div>
      </div>

      <!-- Existing Dashboard Sections -->
      <div class="dashboard-appointments-container">
        <h2>Upcoming Appointments</h2>
        <table class="dashboard-table">
          <thead>
            <tr>
              <th>Doctor Name</th>
              <th>Date</th>
              <th>Description</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let appointment of appointments">
              <td>{{ fetchDoctorName(appointment.doctor_id) }}</td>
              <td>{{ appointment.appointment_date | date: 'fullDate' }}</td>
              <td>{{ appointment.description }}</td>
              <td>
                <button class="view-btn" (click)="viewAppointment(appointment.id)">View</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="dashboard-reports-container">
        <h2>Appointment Medical History</h2>
        <div class="filter-container">
          <label for="filter">Filter:</label>
          <select id="filter" (change)="onFilterChange($event)">
            <option value="daily">Daily</option>
            <option value="weekly">Weekly</option>
            <option value="monthly" selected>Monthly</option>
            <option value="yearly">Yearly</option>
          </select>
        </div>
        <div class="chart-container">
          <canvas id="medicalReportsChart"></canvas>
        </div>
      </div>

      <!-- Background History Section -->
      <div class="background-history-container">
        <h3>Background History</h3>
        <table class="dashboard-table">
          <thead>
            <tr>
              <th>Doctor Name</th>
              <th>Date</th>
              <th>Activity</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Jeffry Olaes</td>
              <td>2024-11-15</td>
              <td>Consultation</td>
              <td>
                <button
                  class="view-btn"
                  (click)="openModal(
                    'Jeffry Olaes',
                    '2024-11-15',
                    'Consultation',
                    'Discussed symptoms and prescribed medication for hypertension.'
                  )"
                >
                  View
                </button>
              </td>
            </tr>
            <tr>
              <td>Jeffry Olaes</td>
              <td>2024-10-10</td>
              <td>Checkup</td>
              <td>
                <button
                  class="view-btn"
                  (click)="openModal(
                    'Jeffry Olaes',
                    '2024-10-10',
                    'Checkup',
                    'Performed routine checkup; blood sugar levels monitored.'
                  )"
                >
                  View
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Modal -->
      <div *ngIf="showModal" class="modal-overlay">
        <div class="modal-content">
          <h3>Past History</h3>
          <p><strong>Medical History:</strong> {{ modalData.pastHistory.medicalHistory }}</p>
          <p><strong>Surgical History:</strong> {{ modalData.pastHistory.surgicalHistory }}</p>
          <p><strong>Medications:</strong> {{ modalData.pastHistory.medications }}</p>
          <p><strong>Allergies:</strong> {{ modalData.pastHistory.allergies }}</p>
          <p><strong>Injuries and Accidents:</strong> {{ modalData.pastHistory.injuriesAndAccidents }}</p>
          <p><strong>Special Needs:</strong> {{ modalData.pastHistory.specialNeeds }}</p>
          <p><strong>Blood Transfusion:</strong> {{ modalData.pastHistory.bloodTransfusion }}</p>
      
          <h3>Present History</h3>
          <p>{{ modalData.description }}</p>
      
          <button class="close-btn" (click)="closeModal()">Close</button>
        </div>
      </div>
    </div>
  </div>
