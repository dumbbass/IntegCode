<div class="userbilling-container">
  <app-sidenav></app-sidenav>
  <div class="main-content">
      <div class="userbilling-header-container">
          <div class="header">
              <div class="logo">
                  <i class="fas fa-user"></i> User Profile
              </div>
          </div>
      </div>
      <!-- Patient History Section -->
    <div class="patient-history-container">
      <h2>Patient History</h2>
      <div class="history-note">
        <table>
          <tbody>
            <tr>
              <td><strong>Medical History:</strong></td>
              <td>{{ user.medical_history }}</td>
            </tr>
            <tr>
              <td><strong>Surgical History:</strong></td>
              <td>{{ user.surgical_history }}</td>
            </tr>
            <tr>
              <td><strong>Medications:</strong></td>
              <td>{{ user.medications }}</td>
            </tr>
            <tr>
              <td><strong>Allergies:</strong></td>
              <td>{{ user.allergies }}</td>
            </tr>
            <tr>
              <td><strong>Injuries and Accidents:</strong></td>
              <td>{{ user.injuries_accidents }}</td>
            </tr>
            <tr>
              <td><strong>Special Needs:</strong></td>
              <td>{{ user.special_needs }}</td>
            </tr>
            <tr>
              <td><strong>Blood Transfusion:</strong></td>
              <td>{{ user.blood_transfusion }}</td>
            </tr>
            <tr>
              <td><strong>Present History:</strong></td>
              <td>{{ user.present_history }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    

      <div class="user-container" *ngIf="user && user.firstname">
        <h2>Personal Information</h2>
        <div class="user-info">
          <div class="info-row">
            <div>
              <strong>Name</strong>
              <p>{{ user.firstname }} {{ user.lastname }}</p>
            </div>
            <div>
              <strong>Gender</strong>
              <p>{{ user.gender }}</p>
            </div>
            <div>
              <strong>Date of Birth</strong>
              <p>{{ user.date_of_birth }}</p>
            </div>
          </div>
          <hr>
          <div class="info-row">
            <div>
              <strong>Email Address</strong>
              <p>{{ user.email }}</p>
            </div>
            <div>
              <strong>Home Address</strong>
              <p>{{ user.home_address }}</p>
            </div>
            <div>
              <strong>Contact Number</strong>
              <p>{{ user.contact_number }}</p>
            </div>
          </div>
          <hr>
          <div class="info-row">
            <div>
              <strong>Birthplace</strong>
              <p>{{ user.birthplace }}</p>
            </div>
            <div>
              <strong>Age</strong>
              <p>{{ user.age }}</p>
            </div>
          </div>
          <hr>
          <div class="info-row">
            <div>
              <strong>Nationality</strong>
              <p>{{ user.nationality }}</p>
            </div>
            <div>
              <strong>Religion</strong>
              <p>{{ user.religion }}</p>
            </div>
            <div>
              <strong>Civil Status</strong>
              <p>{{ user.civil_status }}</p>
            </div>
          </div>
          <hr>
          <div class="info-row">
            <div>
              <strong>Height</strong>
              <p>{{ user.height }} cm</p>
            </div>
            <div>
              <strong>Weight</strong>
              <p>{{ user.weight }} kg</p>
            </div>
            <div>
              <strong>Medications</strong>
              <p>{{ user.medications }}</p>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="errorMessage" class="error-message">
        <p>{{ errorMessage }}</p>
      </div>

      <!-- Button to open the modal -->
      <button (click)="openModal()">Edit Profile</button>

      <!-- Modal for updating user profile -->
      <div id="updateProfileModal" class="modal" [class.show]="isModalOpen">
        <div class="modal-content">
          <span class="close" (click)="closeModal()">&times;</span>
          <h2>Update Profile</h2>
          <form (ngSubmit)="updateUserProfile()">
            <div class="form-group">
              <label for="firstname">First Name</label>
              <input type="text" id="firstname" [(ngModel)]="user.firstname" name="firstname" required disabled>
            </div>
            <div class="form-group">
              <label for="lastname">Last Name</label>
              <input type="text" id="lastname" [(ngModel)]="user.lastname" name="lastname" required disabled>
            </div>
            <div class="form-group">
              <label for="email">Email</label>
              <input type="email" id="email" [(ngModel)]="user.email" name="email" required>
            </div>
            <div class="form-group">
              <label for="home_address">Home Address</label>
              <input type="text" id="home_address" [(ngModel)]="user.home_address" name="home_address">
            </div>
            <div class="form-group">
              <label for="contact_number">Contact Number</label>
              <input type="text" id="contact_number" [(ngModel)]="user.contact_number" name="contact_number">
            </div>
            <div class="form-group">
              <label for="birthplace">Birthplace</label>
              <input id="birthplace" [(ngModel)]="user.birthplace" name="birthplace">
            </div>
            <div class="form-group">
              <label for="age">Age</label>
              <input id="age" [(ngModel)]="user.age" name="age">
            </div>
            <div class="form-group">
              <label for="nationality">Nationality</label>
              <input id="nationality" [(ngModel)]="user.nationality" name="nationality">
            </div>
            <div class="form-group">
              <label for="religion">Religion</label>
              <input id="religion" [(ngModel)]="user.religion" name="religion">
            </div>
            <div class="form-group">
              <label for="civil_status">Civil Status</label>
              <input id="civil_status" [(ngModel)]="user.civil_status" name="civil_status">
            </div>
            <div class="form-group">
              <label for="height">Height</label>
              <input type="text" id="height" [(ngModel)]="user.height" name="height">
            </div>
            <div class="form-group">
              <label for="weight">Weight</label>
              <input type="text" id="weight" [(ngModel)]="user.weight" name="weight">
            </div>
            <div class="form-group">
              <label for="medications">Medications</label>
              <textarea id="medications" [(ngModel)]="user.medications" name="medications"></textarea>
            </div>
            <button type="submit">Save Changes</button>
          </form>
        </div>
      </div>
  </div>
</div>